import{d as b,ab as f,X as S,aj as d,j as h,Q as _,a as w,c as k,w as n,k as o,b as e,l as C,al as W,O as y}from"./index-t81Ut7qy.js";const B=["disabled"],E=e("i",{class:"bi bi-floppy me-1"},null,-1),v={class:"spinner-border spinner-border-sm me-2","aria-hidden":"true"},L={role:"status"},j=b({__name:"SubmitButton",props:{callback:{type:Function}},emits:["waitingStateChanged","SubmissionSuceeded"],setup(u,{emit:m}){const s=u,r=m,i=f(),c=S(),l=d("modelState"),g=d("clearLeavingConfirmation"),a=h({isWaiting:!1});_(()=>a.isWaiting,t=>r("waitingStateChanged",t));async function p(){a.isWaiting=!0,i.start();try{s.callback.constructor.name==="AsyncFunction"?await s.callback():s.callback(),a.isWaiting=!1,i.finish(),g(),l.clearErrors(),await c.getSubmitSuccessConfirmationAsync(),r("SubmissionSuceeded")}catch(t){if(a.isWaiting=!1,i.finish(),t instanceof W||t instanceof y)l.setErrors(t.errors),await c.getSubmitErrorConfirmationAsync();else throw t}}return(t,x)=>(w(),k("button",{class:"btn btn-primary w-100 px-4",disabled:a.isWaiting,onClick:p},[n(e("span",null,[E,C(" Lưu ")],512),[[o,!a.isWaiting]]),n(e("span",v,null,512),[[o,a.isWaiting]]),n(e("span",L,"Đang lưu ...",512),[[o,a.isWaiting]])],8,B))}});export{j as default};
