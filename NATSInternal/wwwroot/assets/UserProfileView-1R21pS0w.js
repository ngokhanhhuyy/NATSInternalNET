import{d as N,L as P,X as R,P as g,y as A,z as L,u as e,a as l,c,b as o,t as n,E as h,D as b,e as a,n as z,p as B,q as E,j as w,Y as T,Z as V,s as M,x as j,_ as G}from"./index-t81Ut7qy.js";import{u as $}from"./authorizationService-fQUsvDoM.js";import{u as q}from"./roleUtility-70Fz6_VK.js";import{u as X}from"./viewStatesComposable-B_gfPsac.js";const t=d=>(M("data-v-8ba73df0"),d=d(),j(),d),Y={key:0,class:"container-fluid d-flex flex-column justify-content-center pt-2 pb-5 px-0"},Z={class:"row m-3 gx-3 position-relative"},F={key:0,class:"col col-12 mb-3"},H={class:"block block-avatar-name bg-white rounded-3 overflow-hidden border border-primary-subtle row"},J={class:"col col-12 upper bg-primary-subtle border-bottom border-primary p-0"},K=["src"],O={key:1,src:"https://placehold.co/256x256"},Q={class:"col lower bg-white d-flex"},W={class:"name d-flex flex-column flex-fill"},oo={class:"fullname"},so={class:"username"},eo={class:"col col-md-auto col-sm-12 col-12 action-buttons-container px-3 pt-md-0 pt-2 pb-md-0 pb-3"},to=t(()=>o("i",{class:"bi bi-pencil-square"},null,-1)),lo=t(()=>o("span",{class:"ms-2"},"Chỉnh sửa",-1)),co=t(()=>o("i",{class:"bi bi-key"},null,-1)),ao=t(()=>o("span",{class:"ms-2"},"Đổi mật khẩu",-1)),no=t(()=>o("i",{class:"bi bi-key"},null,-1)),ro=t(()=>o("span",{class:"ms-2"},"Đặt lại mật khẩu",-1)),io=t(()=>o("i",{class:"bi bi-trash3"},null,-1)),mo=[io],uo={key:1,class:"col col-md-6 col-sm-12 col-12 mb-3"},_o={class:"block bg-white rounded-3"},po=t(()=>o("div",{class:"block-header bg-primary-subtle border border-primary-subtle rounded-top-3 px-3 py-2"},[o("span",{class:"text-primary fw-bold"},"Thông tin cá nhân")],-1)),ho={class:"block-body border border-top-0 border-default rounded-bottom-3 p-3"},bo={class:"row"},fo=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Giới tính")],-1)),vo={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},yo={key:0},go={key:1},wo={class:"row mt-3"},ko=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Ngày sinh")],-1)),Io={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},Uo={key:0,class:"row mt-3"},xo=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Số điện thoại")],-1)),Co={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},So={key:1,class:"row mt-3"},Do=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Email")],-1)),No={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},Po={key:2,class:"col col-md-6 col-sm-12 col-12"},Ro={class:"block bg-white rounded-3 d-flex flex-column"},Ao=t(()=>o("div",{class:"block-header bg-primary-subtle border border-primary-subtle rounded-top-3 px-3 py-2"},[o("span",{class:"text-primary fw-bold"},"Thông tin nhân viên")],-1)),Lo={class:"block-body border border-top-0 border-default rounded-bottom-3 p-3"},zo={class:"row"},Bo=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Vị trí")],-1)),Eo={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},To={key:0,class:"row mt-3"},Vo=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Gia nhập")],-1)),Mo={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},jo={class:"row mt-3"},Go=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Tạo lúc")],-1)),$o={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},qo={key:1,class:"row mt-3"},Xo=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Chỉnh sửa lúc")],-1)),Yo={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},Zo={key:2,class:"row mt-3"},Fo=t(()=>o("div",{class:"col col-lg-4 col-md-12 col-sm-4 col-12 p-0"},[o("label",null,"Note")],-1)),Ho={class:"col col-lg-8 col-md-12 col-sm-8 col-12 p-0"},Jo=N({__name:"UserProfileView",async setup(d){let r,m;const k=B(),I=E(),f=P(),v=R(),u=$(),U=q(),s=([r,m]=g(()=>C()),r=await r,m(),r),_=([r,m]=g(()=>S()),r=await r,m(),r);X();const x=A(()=>{let i=U.getRoleBootstrapColor(s.userInformation.role.name);return`bg-${i}-subtle border-${i}-subtle text-${i}`});async function C(){const i=parseInt(k.params.userId),y=await f.getUserDetailAsync(i);return w(new T(y))}async function S(){return w({canEditUser:u.canEditUser(s.id,s.userInformation.role.powerLevel),canDeleteUser:u.canDeleteUser(s.id,s.userInformation.role.powerLevel),canResetUserPassword:u.canResetUserPassword(s.id,s.userInformation.role.powerLevel),canChangeUserPassword:u.canChangeUserPassword(s.id)})}async function D(){await v.getDeleteConfirmationAsync(),await f.deleteUserAsync(s.id),await v.getSubmitSuccessConfirmationAsync(),await I.push({name:"userList"})}return(i,y)=>{const p=L("RouterLink");return e(s)!=null?(l(),c("div",Y,[o("div",Z,[e(s).personalInformation?(l(),c("div",F,[o("div",H,[o("div",J,[e(s).personalInformation.avatarUrl?(l(),c("img",{key:0,src:e(s).personalInformation.avatarUrl,class:"avatar img-thumbnail border-primary-subtle"},null,8,K)):(l(),c("img",O))]),o("div",Q,[o("div",W,[o("span",oo,n(e(s).personalInformation.fullName),1),o("span",so,"@"+n(e(s).userName),1)])]),o("div",eo,[e(_).canEditUser?(l(),h(p,{key:0,to:{name:"userUpdate",params:{userId:e(s).id}},class:"btn btn-outline-primary btn-sm m-1"},{default:b(()=>[to,lo]),_:1},8,["to"])):a("",!0),e(_).canChangeUserPassword?(l(),h(p,{key:1,to:{name:"userPasswordChange",params:{userId:e(s).id}},class:"btn btn-outline-primary btn-sm m-1"},{default:b(()=>[co,ao]),_:1},8,["to"])):a("",!0),e(_).canResetUserPassword?(l(),h(p,{key:2,to:{name:"userPasswordReset",params:{userId:e(s).id}},class:"btn btn-outline-primary btn-sm m-1"},{default:b(()=>[no,ro]),_:1},8,["to"])):a("",!0),e(_).canDeleteUser?(l(),c("button",{key:3,class:"btn btn-outline-danger btn-sm m-1",onClick:D},mo)):a("",!0)])])])):a("",!0),e(s).personalInformation?(l(),c("div",uo,[o("div",_o,[po,o("div",ho,[o("div",bo,[fo,o("div",vo,[e(s).personalInformation.gender===e(V).Male?(l(),c("span",yo,"Nam")):(l(),c("span",go,"Nữ"))])]),o("div",wo,[ko,o("div",Io,[o("span",null,n(e(s).personalInformation.birthday),1)])]),e(s).personalInformation.phoneNumber?(l(),c("div",Uo,[xo,o("div",Co,[o("span",null,n(e(s).personalInformation.phoneNumber),1)])])):a("",!0),e(s).personalInformation.email?(l(),c("div",So,[Do,o("div",No,[o("span",null,n(e(s).personalInformation.email),1)])])):a("",!0)])])])):a("",!0),e(s).userInformation?(l(),c("div",Po,[o("div",Ro,[Ao,o("div",Lo,[o("div",zo,[Bo,o("div",Eo,[o("span",{class:z(["badge border",x.value])},n(e(s).userInformation.role.displayName),3)])]),e(s).userInformation.joiningDate?(l(),c("div",To,[Vo,o("div",Mo,[o("span",null,n(e(s).userInformation.joiningDate),1)])])):a("",!0),o("div",jo,[Go,o("div",$o,[o("span",null,n(e(s).userInformation.createdDateTime),1)])]),e(s).userInformation.updatedDateTime?(l(),c("div",qo,[Xo,o("div",Yo,[o("span",null,n(e(s).userInformation.updatedDateTime),1)])])):a("",!0),e(s).userInformation.note?(l(),c("div",Zo,[Fo,o("div",Ho,[o("span",null,n(e(s).userInformation.note),1)])])):a("",!0)])])])):a("",!0)])])):a("",!0)}}}),os=G(Jo,[["__scopeId","data-v-8ba73df0"]]);export{os as default};
